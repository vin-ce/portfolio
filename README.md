Public version of portfolio code.